# h2 임베디드 모드 

![[Pasted image 20231214100944.png]]
김영한 강의를 들으면서 위와 같은 테스트 코드를 작성하고 실제 삽입된 데이터 확인을 위해 Rollback을 false 로 설정해두었다. 

![[Pasted image 20231214101051.png]]
테스트는 성공했고, Insert 쿼리가 실행된 것도 찍혔다. 

![[Pasted image 20231214101132.png]]
그러나 DB를 확인해보면 강의와 달리 테이블이 비어있어서 무엇이 문제인지 찾아봤다. 

강의와 내 코드의 차이는 없었고, 문제는 로컬 서버에서 DB를 다룬 강의와 달리 나는 임베디드 모드의 H2 DB를 사용한 점이었다. 임베디드 모드에서는 테스트가 끝났을때 db 도 함께 종료되어 실제 테이블이 유지되지 않는다. 

내가 보고 있는 h2 테이블은 프로젝트 서버를 돌렸을때 생성된 테이블인 것이다. 

따라서 테스트에서 데이터를 실제 확인하려면 db를 로컬 버전으로 